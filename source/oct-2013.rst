============
Octubre 2013
============

.. contents:: Tabla de Contenido

.. 01 de Octubre del 2013 - 5:00 p.m
.. ---------------------------------
.. ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.. Problemas solventados en el día
.. ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.. ~~~~~~~~~~~~~~~
.. Resumen del día
.. ~~~~~~~~~~~~~~~
.. ~~~~~~~~~~~~~~~~~~
.. Servers ejecutados
.. ~~~~~~~~~~~~~~~~~~
.. ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.. Problemas que se presentaron
.. ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.. trabajamos en delivery el 30 de sep, 1 de octubre y 2 de octubre

22 de Octubre del 2013 - 5:00 p.m
---------------------------------

~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Problema multi-currency agrinos
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

_check_currency_amount en account/account_move_line.py línea 629
definición del método 609.


Comentarios de Nhomar
~~~~~~~~~~~~~~~~~~~~~

**IMPORTANTE**

- El modelo de web_gmaps_action ahora es un osv.AbstractModel (como mail.thread)
- La documentación del módulo está en web_gmaps_action/doc/
- Ya existen una acción a partner (Sólo demo)
- Lo mismo que hizo con el módulo de partner debo hacerlo yo con el módulo de
  freight_zone_googlemaps
- Tengo que borrar todos los campos/columnas y métodos que definí en mi modelo y sólo colocar el
  _inherit = ['gmaps.group']
- El modelo de puntos ahora se llama gmaps_point
- En los modelos Abstract debo referirme al modelo como self._name
- En el modelo de puntos (gmaps_point) debo colocar el método partner_insidepolygon. Pero en vez de
  recibir un partner, va a recibir un id con un puntos, y una lista de ids, con un conjunto de
  puntos que forman el área.
- Traer método de googleMaps al método abstracto, es decir, recibir data y retornar el objeto.
  def convert_to_google_obj(cr ,uid, id, lat, lng, ... , context=None )
- En setting -> databasestructure > list points, puedes modificar los puntos como modificas los
  mensajes de mail.thread.
- cambiar nombre del modelo en la data demo.
- Crear data demo a partner de Nhomar.
- La data demo es para validar el modelo.
- modulo web_gmaps y web_gmaps_action

Con respecto a Gmaps
~~~~~~~~~~~~~~~~~~~~

Desarrollar un módulo tercero que sea el puente entre ambos módulos de zone y widget de maps.
**TO DO** 1. Modulo puente tendrá: Vista usando el widget extra.

**DONE** 2. Otro módulo puente tendrá: Será en python, cargará data demo para los puntos, tendrá método que valide si el punto del partner se encuentra dentro de una zona. 

Ya se tiene el módulo con los campos y la data demo. http://bazaar.launchpad.net/~vauxoo/openerp-freight/trunk/files/head:/freight_zone_mapsgoogle/

La validación del punto está lista en código python el método se llama partner_insidepolygon, me hubiese gustado hacerlo a nivel de javascript, pues encontré esto https://developers.google.com/maps/documentation/javascript/examples/poly-containsLocation. Pero será para después.

Funcionamiento del módulo de maps:
1. Save Info: sobreescribe el campo comments del partner.
2. Mensaje de "Saved data file" significa que ya se guardo en openerp.

Para programar usando API de google:
1. install googlemaps

Yanina:

Estará encargada de todo lo referente a los modelos python, se lista las acciones que tomará para lograr ésto.

**DONE** 1. Agregar campos gmaps_area_ids debe ser \*2many (puntos necesarios para conformar area, al menos 3),  (gmaps_lat, gmaps_lon y many2one: gmaps_zone_id). 

El módulo es http://bazaar.launchpad.net/~vauxoo/openerp-freight/trunk/files/head:/freight_zone_mapsgoogle/

**DONE** 2. Módulo para geolocalizar de manera más precisa. 
(Como el de Openerp, pero los campos irán con los nombres acordados con la API a desarrollar, y la precisión de los campos sera de 6) el módulo de openerp esta
hecho para saber el pais de un partner, lo que realizará Yanina (reutilizando el algorithmo de OpenERP) será para conocer el punto exacto..

El módulo es http://bazaar.launchpad.net/~vauxoo/openerp-freight/trunk/files/head:/freight_partner_assign_precise/

**DONE** 3. Crear data demo de puntos reales (para efecto de pruebas automáticas).

El módulo es  http://bazaar.launchpad.net/~vauxoo/openerp-freight/trunk/files/head:/freight_zone_mapsgoogle/

**TO DO** 4.  Mejora de vistas actuales,
**TO DO** 5. Mejora de vista de busqueda (group_by de zona en partner).

**DONE** 6.- Investigar algoritmo de gmaps llamado Area para saber si un punto está dentro de un área (python).

Se usó  http://vsbabylon.blogspot.com/2010/02/como-detectar-si-un-punto-esta-fuera-o.html basado en el algoritmo de jordan http://jsbsan.blogspot.com/2011/01/saber-si-un-punto-esta-dentro-o-fuera.html

Parte de aprendizaje I+D:
**DONE** 0. Buscar documentacion de la libreria googlemaps y API python

Usar la API de google desde python no me funcionó, hablé con Oscar sobre ésto y me dijo que las key gratuitas dan problemas en python, me recomendó usarlas desde javascript.

@Nhomar me avisas cuando tengas tu parte lista, porque no entiendo porque tenemos que tener un módulo puente usando el módulo extra.
Voy a cargar las horas de ésto y a ponerme con unas cosas de agrinos mientras tanto. 




21 de Octubre del 2013 - 5:00 p.m
---------------------------------


Con respecto a Gmaps
~~~~~~~~~~~~~~~~~~~~

Estoy parada porque no me quiere cargar la api de google maps.
Le pregunte a Oscar y quedamos en un hangout para ver que está sucediendo.


Problema con multi-currency
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Como correo yaml:

Al crear una factura en moneda extranjera, y que existan varias tasa de cambios distintas, la hacer
pagos parciales, pueden haber perdidas o ganancias, pero openerp solo toma en cuenta las ganancias
y/o perdidas cuando se termina de pagar la factura.

factura del 1/1/2013

al 15/06/2013 pagamos la mitad. 500 $
Luego al 21/10/2013 se paga la otra mitad..
Se registran los pagos al momentos, con su ganancia o perdida.

+-------+-------+
| Debit | Credit|
+=======+=======+
| 67.81 |       |
+-------+-------+
|       | 454.55|
+-------+-------+
|       | 65.41 |
+-------+-------+
|       | 327.03|
+-------+-------+

bzr revert 9230 en lso addons de agrinos

se viola constraint check_currency_amount de account/account_move_line.py

Buscar vuelta al proceso para ver si podemos conseguir una forma de no violar el constraint
Los fixes que hagamos hacerlos pasar por el test yaml de openerp.

El yaml que explota es donde aparece el -10.0

Revisar porque está explotando.

18 de Octubre del 2013 - 5:00 p.m
---------------------------------

Ver videos de backbones (bootstrap)

Al pie de la letra:
- geolocalizacion:

web-addons : tendremos todos los widgets genericos (accion de cliente, widget \*2many)

Un modulo tercero que sea el puente entre ambos modulos (zone y widget map)
1. Modulo puente: Vista usando el widget extra
2. Otro modulo puente que tenga 

ese modulo debe estar en python. Cargar data demo para los puntos, hacer metodo que valide si el
punto del partner se encuentra en esa zona

importantes

Save Info sobreescribe el campo comments del partner.
saved data file mensaje es cuando ya se guardo en open

**LISTO** install googlemaps: pip install googlemaps


Yanina:
**LISTO** 1. gmaps_area_ids debe ser \*2many (puntos necesarios para conformar area, al menos 3), 
(gmaps_lat, gmaps_lon y many2one: gmaps_zone_id). Yanina.
**LISTO 2** 2. Modulito para geolocalizar de manera precisa. (Como el de Openerp, pero los campos iran con los
nombres acordados con Nhomar, y la precision de los campos sera de 6) el módulo de openerp esta
hecho para saber el pais de un partner.
**LISTO** 3. Crear data demo de puntos reales.
3.1 Yanina. Crear vista en lista, 
4. busqueda (group_by de zona en partner)
**LISTO** 5. Investigar algoritmo de gmaps llamado Area para saber si un punto está dentro de un área.
http://vsbabylon.blogspot.com/2010/02/como-detectar-si-un-punto-esta-fuera-o.html
**Ya la cree** 7. Buscar developer key de google :) , con mi acc gmail.
8. Nhomar documentará en su módulo como hace pull puntos desde javascript y push en el modelo TA 
HECho

Parte de aprendizaje:
0. Buscar documentacion de la libreria googlemaps y API
1. Ver videos de backbones (incluye renderizado de bootstrap, timepito libre)

Devuelve un objeto punto, en python ya tiene atributos. Igual con Area.
llamo a la funcion de google javascript y me deuvelve un objeto en python.


Nhomar:
1. UNa vez leido el registro de los puntos en el modelo, dibujar los puntos en el mapa. 
(Capa vista) Encargado Nhomar.
2. El proceso de salvar los puntos en el modelo, los datos se extraen desde el mapa (javascript).





17 de Octubre del 2013 - 5:00 p.m
---------------------------------

http://help.openerp.com/question/21529/how-to-extend-fieldsselection-options-without-overwriting-them/

When you don't have control on the original model

Say you want to modify the selection field type of the product categories. Excerpt of the code from the product addon, that you can't modify:

.. code-block :: python

    class product_category(osv.osv):
        # <snip>
        _name = "product.category"
        _description = "Product Category"
        _columns = {
        # <snip>
            'type': fields.selection([('view','View'), ('normal','Normal')], 'Category Type', help="A category of the view type is a virtual category that can be used as the parent of another category to create a hierarchical structure."),
        }
 
In your module you need to alter the field in the _columns in the __init__ of the model:

.. code-block :: python

    class product_category(orm.Model):
        _inherit = 'product.category'

        def __init__(self, cr, uid, name, context=None):
            super(product_category, self).__init__(cr, uid, name, context)
            option = ('special', 'Special')
            type_selection = self._columns['type'].selection
            if option not in type_selection:
                type_selection.append(option)

~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Hablé con Nhomar:
~~~~~~~~~~~~~~~~~
El branch https://code.launchpad.net/~vauxoo/addons-vauxoo/maps_oscar tiene un código javascript,
tengo que crear un nuevo modulo de zonas, pero debo cambiar el action, por un action con tag a la
clase en javascript desarrollada por Nhomar y Oscar, para que el nuevo modelo de zona pueda tomar
ese action y poder hacer la marcación con google maps de una zona y taerme esos puntos y guardarlos
en un one2many.

Debo instalar web_bootstrap3 para que OpenERP puede reconocer la librería bootstrap.

<fields name="params" funciona para colocar elementos dentro de un diccionario con parámetros
adicionales para que mi vista pueda ser dinámica.

José Javier aprobó 30 horas para éste desarrollo, ya se cargaron 4 horas por reunión y
planificación.

Se asignó tarea de filtro a Eduardo por la instancia de erp.vauxoo
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Meter módulo de ``pos_delivery_restaurant``

Módulo de freight
~~~~~~~~~~~~~~~~~

**freight_weight:**
    - Agrega campo a fleet.vehicle para la capacidad de peso volumétrico
    - Agrega campo a fleet.vehicle para la capacidad de peso físico
    - Agrega campo a fleet.vehicle type para determinar el tipo de vehiculo
    - Agrega campo a product.product el campo de peso volumétrico, tomando el campo volume del
      producto ya existente -> (volume/5000)
    - Se agrega un nuevo decimal.precision para el peso volumétrico del producto de 6.

**freight_zone:**
    - Agrega un nuevo modelo de zonas.


~~~~~~~~~~~~~~~~~~
Servers ejecutados
~~~~~~~~~~~~~~~~~~

**Módulo de zone con el action**

./openerp-server -r openerp -w openerp
--addons-path=../addons/,../web/addons/,../addons-vauxoo-7.0,../freight/7.0-freight_zone_mapsgoogle-dev-yani,../maps_oscar
-u freight_zone_mapsgoogle -d freight --xmlrpc-port=8069 --no-xmlrpcs --no-netrp


./openerp-server -r openerp -w openerp
--addons-path=../addons/,../web/addons/,../7.0-pos_product_filter-dev-yani -d delivery
--xmlrpc-port=8069 --no-xmlrpcs --no-netrp

./openerp-server -r openerp -w openerp
--addons-path=../addons/,../web/addons/,../addons-vauxoo-7.0,../freight/7.0-freight_zone-dev2-yani
-u freight_zone -d freight --xmlrpc-port=8069 --no-xmlrpcs --no-netrp

16 de Octubre del 2013 - 5:00 p.m
---------------------------------

- Agregar campo many2one a embarque en la orden de venta (que es el mismo de pos.order)
- Agregar campo capacidad de peso físico en el camion.
- calcular peso volumétrico de un producto y colocar el campo de peso requerido.
- Tomar en cuenta ambos pesos del pedido e ir decrementando de la capacidad hasta que una de ellas se
  exceda, tomar en cuenta.
- Al confirmar el embarque es cuando realmente se hace la consolidacion de las órdenes de venta.
- Agregar un campo tipo en el modelo de embarque (delivery o flete)
- Filtrar medio de transporte del embarque dependiendo del tipo de embarque (si es delivery o flete)
- Vamos a tener ambas capacidades en el embarque peso volumétrico o peso físico.
- La orden de venta tiene un many2many a picking y ese es el que realmente se meterá en el
  embarque. la orden de venta tiene un campo many2many a picking y picking tiene un many2one. 
  agregar campo many2one a embarque en el picking.
 
many2one a Zone desde el POS.
many2one a Zone desde el Embarque.
many2many o one2many a orden de venta desde el embarque

La orden de venta crea un picking y a partir de ese picking es que realmente se crea el que se va a
enviar.
Filtrar los pickings para que se tome en cuenta solo los que van a los clientes.
se tienes los picking internos y los externos.

En orden de venta:
- Campo many2many a Embarque

En el picking (existen dos picking internos y externo):
- Campo many2one a Embarque (tomar por defecto el de la orden de venta)

En el embarque:
- one2many a órdenes de venta
- one2many a picking internos
- one2many a picking externos
- many2one a Zona
- campo many2one a vehiculo

El estatus de lo que pase en el embarque, pasa tambien en la orden de venta.
Cuando se crea un picking a partir de otro picking tomar el embarque del picking padre.

Creamos un nuevo proyecto en launchpad:
https://code.launchpad.net/~vauxoo/openerp-freight/trunk

Donde pasamos todo lo relacionado con flete a éste proyecto, y tambíen el calculo de zonas que
todavía hay problemas ocn respectos a las horas trabajadas

15 de Octubre del 2013 - 5:00 p.m
---------------------------------

~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Se estuvo revisando y con la siguiente dirección, el punto que se obtuvo fue más exacto en el mapa
de google.

Dirección de Vauxoo exacta en el google maps

10.454149, -66.928102
E/S Km2, 2 Carretera Panamericana, Caracas, Distrito Metropolitano de Caracas, Venezuela

Reunión con humberto para poder hacer planificación:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- Vamos a darle a Jose Javier las tareas que faltan para que el pueda crear las historias de
  usuarios. DONE

- Crear las tareas en un papelito y lo vamos a organizar en un pizarron luego esas notas la pasamos
  a una tarea en la instancia.

- Crear branch paralelo de addons-vauxoo/7.0 para hacer nuestros merges y no depender de un
  revisor.

- Vamos a seguir con lo de embarques. (Hacer merges y entregables)

- Planificar tareas usando mapa de flete y delivery que hicimos con Jose Javier.

Se crearon dos branchs paralelos para trabajar nuestros merges.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- lp:~vauxoo-private/vauxoo-private/fleet-cluster
- lp:~vauxoo/addons-vauxoo/addons-vauxoo-cluster

Se mandó un correo a Nhomar con respecto a lo que pienso de zona
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

José Javier, te cuento que lo de zonas podría tardar un poco mas de lo que se espera, te explico
por qué:



Hable con Nhomar sobre los problemas de ver si la dirección de una persona se encuentra dentro de
la zona de un punto de venta.

Propuesta de Nhomar:

Google maps tiene una herramienta sobre la cual puedes dibujar rectángulos, polígonos y cualquier
figura plana para poder determinar una zona sobre el mapa.

https://developers.google.com/maps/documentation/javascript/examples/drawing-tools?hl=es

Tengo entendido que Oscar y Nhomar desarrollaron un webservice que toma esa zona dibujada y la
almacena en puntos (formados por longitud y latitude) que delimitan dicha zona.

https://code.launchpad.net/~vauxoo/web-addons/7.0-gmap_poc

Ahora necesito saber como funciona ese webservice para poder obtener esa información dibujada en
google maps a un campo one2many que se encontrará en un Zona.


El punto geográfico de la dirección de un partner puede obtenerse escribiendo detallamente la
dirección del partner en el campo street 2 (asumiendo que ya tuve que haber modificado el método
geo_jquery_address del módulo crm_partner_assign para que tome en cuenta el campo street2 ) ya que
dicho módulo se encarga de geolocalizar la dirección del partner y de guardar las coordenadas de su
ubicación.

Entonces, lo que se debe hacer es lo siguiente:

Hablar con Oscar para que me diga como extraer los puntos del rectangulo o el polígono que se
dibuje en el mapa para que devuelva la información de los puntos que lo delimitan y se pueda
guardar en una zona. Teniendo así un one2many con los puntos de dicha zona.

Lo siguiente que se debe hacer es guardar el punto gps de la dirección del partner que ya lo hace
OpenERP

Ahora lo que podría tomar tiempo sería:

- Encontrar la manera de calcular si el punto de ubicación de un partner se encuentra dentro de los
  puntos de una zona. 

- Hacer un widget para que el punto de la dirección del partner se pueda ver de manera gráfica en
  el formulario, y así el usuario pueda seleccionar en que punto vive la persona.

Se finiquitaron algunas tareas
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Tanto en la instancia de Vauxoo como la de Agrinos.

Se terminaron de crear algunas instancias de Usuario.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- Crear maestros de alcance de reparto a domicilio.
- Notificaciones en cocina, barra y zona de ensamblaje

mande un correo a josé javier para que nos ayude a terminar de definir las historias de usuario
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


14 de Octubre del 2013 - 5:00 p.m
---------------------------------

~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Hable con Nhomar sobre los problemas de ver si la dirección de una persona se encuentra dentro de
la zona de un punto de venta.

Propuesta de Nhomar:

Google maps tiene una herramienta sobre la cual puedes dibujar rectangulos, polígonos y cualquier
figura plana para poder determinar una zona sobre el mapa, ésto lo que hace es devolverte los
puntos GPS de la figura que se ha dibujado sobre la imagen.

El punto de un partner puede obtenerse escribiendo detallamente la dirección del partner y luego
instalando el modulo ``crm_partner_assign`` que agrega un botón e información del punto gps en el
mapa de google. es decir, el módulo se encarga de geolacalizar la dirección del partner y de
guardar las coordenadas de su ubicación.

Entonces, lo que se debe hacer es lo siguiente:

- Hablar con oscar para que me diga como extraer los puntos del rectangulo o el polígono que se
  dibuje en el mapa para que devuelva la infor y se pueda guardar en una zona. Tenienco así un
  on2many con los puntos de dicha zona.
- Lo siguiente que se debe hacer es guarddar el punto gps de la dirección del partner que ya lo
  hace O
 
Entonces, lo que se debe hacer es lo siguiente:

- Hablar con oscar para que me diga como extraer los puntos del rectangulo o el polígono que se
   dibuje en el mapa para que devuelva la info y se pueda guardar en una zona. Teniendo así un
   on2many con los puntos de dicha zona. (callbacks)
- Lo siguiente que se debe hacer es guardar el punto gps de la dirección del partner que ya lo
   hace OpenERP, pero hay que tomar en cuenta que la función del módulo ``crm_partner_assign``
   llamada **geo_jquery_address** toma en cuenta ciertos parámetros como lo son la ciudad, el país,
   la calle, etc y se necesita agregar otros parámetros necesarios como los son la urbanización, la
   parroquia, el municipio, etc, para que la dirección sea mas detallada.
- Luego de guardar el punto gps de un partner, se debe buscar algún método que se encarga de buscar
  si el punto gps de un partner se encuentra dentro de una zona dibujada. Nhomar me dijo que no
  invitiera tiempo calculándolo, que puede haber algún método en google maps que ya lo haga.
- Hacer un widget para que el punto de la dirección del partner se pueda ver de manera gráfica.



.. note:: tomar en cuenta que la dirección de vauxoo en la data demo no se está geolocalizando, hay
    probar que esta pasando allí, si falta algún dato, a parte de que la zona postal es 1040.

    Nhomar me dijo que hay que agregar un fenses que será un campo many2one al partner. No entendí
    muy bien ésta parte de las fronteras.

    Revisar branch de e-maps en vauxoo-private o en web-addons.

    tomar en cuenta que google maps te permite una cantidad limitada de consultas al día, pero
    cluster debe tener cuenta paga para eso


Enviar correo a Cluster sobre propuesta.


11 de Octubre del 2013 - 5:00 p.m
---------------------------------

~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Se crea un módulo que extiende de account financial report para poder reemplazar los reportes en
rml a webkit, donde se hace una importación desde el parser para poder acceder a los métodos. Ésto
corresponde a la tarea 3963 de http://agrinos.openerp.la/ 

https://code.launchpad.net/~vauxoo/account-financial-report/7.0-report_webkit_afr-dev-yani

Tuve un problema porque al llamar al método print_report se estaba guardando el id del wizard de
mala manera.

10 de Octubre del 2013 - 5:00 p.m
---------------------------------

~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Se creo el nuevo módulo para el control de rutas y/o zonas en fleet, se llama fleet_zone.

Módulos creados:
https://code.launchpad.net/~vauxoo-private/vauxoo-private/7.0-fleet_zone-dev-yani

Empecé con la tarea de agrinos 3963

~~~~~~~~~~~~~~~~~~
Servers ejecutados
~~~~~~~~~~~~~~~~~~
./openerp-server -r openerp -w openerp
--addons-path=../addons/,../web/addons/,../addons-vauxoo-7.0,../fleet_zone,../base_module_record-dev-yani/
-u fleet_zone -d delivery --xmlrpc-port=8069 --no-xmlrpcs --no-netrp

09 de Octubre del 2013 - 5:00 p.m
---------------------------------

~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Rafa me mandó a hacer la tarea asociada a ésta historia.
https://erp.vauxoo.com/#id=13&view_type=form&model=user.story&menu_id=557&action=726
La tarea está lista
https://erp.vauxoo.com/?debug=#id=759&view_type=form&model=project.task&menu_id=136&action=138

Procedí a empezar con la tarea asociada a base_module_record:
https://code.launchpad.net/~vauxoo-private/vauxoo-private/7.0-base_module_record-dev-yani

No está fácil :s.


**Puntos a tratar:**
- Tareas que se dejaron incompletas porque le falta parte javascript (141, 124 y 137)

  Kathy explica a José Javier que se tiene y que debería hacer Eduardo.


- Tareas sobre Zonas (126) y la (144) que consolida segun fecha, zona, turno y capacidad de carga

Las zona va a ser un nuevo modelo de un one2many con el tipo de lugar (calle, avenida,
urbanización, parroquia,etc) y el campo con el nombre del tipo de lugar.

Luego los embarques se referencia a una zona.

orden de venta tiene una ruta1 y se asigna a un embarque que pase por esa ruta1
el campo de ruta no es obligatorio en un embarque.



La validación de si el envio esta dentro de la zona es cuando se toma el pedido.

- Aclarar tarea (139) ya que se tiene un peso real o volumetrico y no se sabe como comparar con que
  capacidad de la unidad de transporte

Se van a tomar en cuenta las dos capacidades volumétrica y real. Y cuando se exceda la capacidad de
alguno, no seguir metiendo picking


08 de Octubre del 2013 - 5:00 p.m
---------------------------------

~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Se eliminó el branch de ``product_dimensions`` porque ya se hizo una propuesta para eso.

**Se están trabajando en los siguientes branches:**
- https://code.launchpad.net/~vauxoo-private/vauxoo-private/7.0-dev-fleet_shipment-kty
- https://code.launchpad.net/~vauxoo/addons-vauxoo/7.0-product_volumetric-dev-yani
- https://code.launchpad.net/~vauxoo-private/vauxoo-private/fleet_delivery: 
- https://code.launchpad.net/~vauxoo/addons-vauxoo/7.0-pos_delivery_restaurant-dev-yani: Solo
agrega un campo selection al pos.config para determinar si es un resturante o un delivery.
- 

**Se le delegará a Eduardo (Tareas lampara):** carga de data de javascript
- https://code.launchpad.net/~vauxoo/addons-vauxoo/7.0-pos_product_filter-dev-yani

**Se va a proponer en https://launchpad.net/openerp-product-attributes:**
- https://code.launchpad.net/~vauxoo/addons-vauxoo/7.0-product_volumetric_weight-dev-yani

**Merges pendiente:** Esto tiene que ver con el campo selection (delivery or restaurant) del modelo
pos.config.
- https://code.launchpad.net/~vauxoo/addons-vauxoo/7.0-pos_delivery_restaurant-dev-yani/+merge/189952

Se tomó el día para organizar los sprints en la instancia de https://erp.vauxoo.com se crearon
varias historias de usuario y además los criterios de aceptación juntos con las tareas, se cargaron
las horas de ayer Lunes.

~~~~~~~~~~~~~~~~~~
Servers ejecutados
~~~~~~~~~~~~~~~~~~

./openerp-server -r openerp -w openerp
--addons-path=../addons/,../web/addons/,../addons-vauxoo-7.0,../product_volumetric,../fleet_delivery
-d delivery --xmlrpc-port=8069 --no-xmlrpcs --no-netrp

07 de Octubre del 2013 - 5:00 p.m
---------------------------------
~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

Se comienza a trabajar con Katherine con flete, se quiere hacer el cálculo volumétrico con tres
campos, altura, anchura, largo. Empezamos con el módulo fleet_shipment que trata los embarques y
fleet_delivery que modifica el model fleet.vehicle para agregar el campo de capacidad volumétrica.

Humberto descubrió que había una propuesta en https://launchpad.net/openerp-product-attributes
donde un tipo había propuesto un modelo con dichos campos, pero lo rechazaron porque supuestamente
ya había otro modulo que los tenía, sin embargo, ese módulo, tiene otras cosas mezcladas de stock,
y no es conveniente. Ya que esos campos se necesitan en un solo mdulo para poder usarlos en otros
procesos.

https://code.launchpad.net/~sebastien.beau/openerp-product-attributes/openerp-product-attributes-product-dimension/+merge/171181


04 de Octubre del 2013 - 5:00 p.m
---------------------------------
~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

clases con Nhomar a las 9:00 a.m

se habló con Humberto para que se dedicarán 12 horas semanales a código entregable, no perder
tiempo investigando o aprendiendo javascript ya que cluster compro solo 100 horas para 
el sprint de delivery.


Se termina la tarea 141, se dejo la parte de POS a eduardo, el branch es 
https://code.launchpad.net/~vauxoo/addons-vauxoo/7.0-delivery_restaurant-dev-yani


Se hablo con Oscar, hizo un módulo de control de vehículos a los empleados, se debe crear
un branch a parte para poder agregar los modelos de unidad de transporte, embarque y pedidos
de los clientes. El módulo de oscar es 
https://code.launchpad.net/~vauxoo-private/vauxoo-private/fleet_papiao

Se empieza con las tareas de flete: 144, 143, 142, 130 y 139.

**Ver cursos:**

https://docs.google.com/a/vauxoo.com/document/d/17YpvSBSOreOMeIIPYXsZwHdT9TXReL9k0lA1sZO25pU/edit

prendiendo JavaScript, CSS, Jquery, Bootstrap, API OpenERP.


#) JavaScript
#) CSS
#) Jquery
#) Ajax 
#) BackboneJS. 
#) Twiter Bootstraap http://bootsnipp.com/ (Recursos)
#) Video de curso de nhomar en Belgica: Aun no público.
#) Documentacion sobre la nueva API de OpenERP. [Como Referencia.]

https://doc.openerp.com/trunk/web/qweb/
https://doc.openerp.com/trunk/web/async/
https://doc.openerp.com/trunk/web/rpc/
https://doc.openerp.com/trunk/web/widget/   
https://doc.openerp.com/trunk/web/module/

Fase 2:
1) Google Apps (Para reportes con JavaScript en google Docs.)
2.- Adicional: Less (Linkear aquí)

trabajo de Nhomar:
https://code.launchpad.net/~vauxoo/web-addons/7.0-web_hideleftmenu


**Configuracion de conexion VPN:**


Buenas Tardes,

A continuación adjunto los certificados que me pediste que creara para el acceso de los 
chicos de Vauxoo  a la VPN. Las instancias se encuentran disponibles en las 
siguientes direcciones:
         
        10.8.0.1:10069 (Desarrollo)
        10.8.0.1:11069 (Pruebas)
        10.8.0.14: 9069 (Projecto)

La dirección del servidor VPN es:

        clusterbrands.dyndns.org:1194

Nota: La tecnologia usada para configurar la VPN es OpenVPN. 

HBTO dice:

crea una carpeta "ovpn"
y dentro pon estos archivos,
desempaca el tar.gz

y luego con sudo ejecuta el .sh

sudo sh cnx.sh

$mv fwdcertificadosvauxoo ovpn
$cd ovpn/
$ls
- cnx.sh  config.conf  yaninaaular.tar.gz
$tar -xvf yaninaaular.tar.gz
- ca.crt  cnx.sh  config.conf  yaninaaular.crt  yaninaaular.key  yaninaaular.tar.gz
$sudo sh cnx.sh

conectar a http://10.8.0.14:9069/

03 de Octubre del 2013 - 5:00 p.m
---------------------------------
~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

02 de Octubre del 2013 - 5:00 p.m
---------------------------------
~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~

#) Módulo delivery_restaurant de los addons-vauxoo (tarea de cluster 141):

- Agregando los campos que necesito para hacer el filtrado. 

Se pide un filtro en el punto de venta que dependiendo del tipo de caja  (en el modelo pos.config 
existe un campo "deli_rest" que determina si la caja es para restaurante o delivery) se muestren  
los  productos que le corresponde, ya que los productos tienen dos campos booleanos (restaurant y 
delivery) que determinan si el producto se mostrara en cajas de delivery y/o restaurante.

Para ésto, se tuvo que heredar de la clase PosModel en el archivo models.js de punto de venta, 
donde se establece la data que se manejará en las funciones javascript, los campos  que se 
necesitaron de producto son "restaurant y delivery" y el campo del punto de venta 
(modelo pos.config)  "deli_rest".

``delivery_restaurant/__openerp__.py``
``Última modificación: 02/10/13 07:57, Estado: modificado, Tipo: archivo``

.. code-block :: python

            ],
    'demo': [],
    'test': [],
    'js': [
        'static/src/js/backbone-super-min.js',
        'static/src/js/main.js',
        'static/src/js/models.js',
        ],
    'active': False,
    'installable': True,
    }


``delivery_restaurant/static/src/js/main.js``
``Última modificación: 02/10/13 07:57, Estado: añadido, Tipo: archivo``

.. code-block :: javascript

    openerp.delivery_restaurant = function(instance){
        var module = instance.point_of_sale;
        delivery_restaurant_models(instance,module);
        instance.delivery_restaurant = module;
    }


``delivery_restaurant/static/src/js/models.js``
``Última modificación: 02/10/13 07:42, Estado: añadido, Tipo: archivo``

.. code-block :: javascript

    function delivery_restaurant_models(instance, module){

        module.PosModel = module.PosModel.extend({
            initialize : function(session, attributes) {
                this._super(session, attributes);
            },
            
            load_server_data : function(){
                self = this;
                loaded = this._super()
                    .then(function(){
                        return self.fetch(
                        'pos.config',
                        ['deli_rest'],
                        [['id','=', 
                        self.get('pos_session').config_id[0]]]
                        );
                    }).then(function(){
                        return self.fetch(
                            'product.product', 
                            ['restaurant' , 'delivery'],
                            [['sale_ok','=',true],['available_in_pos','=',true]]
                            
                            );
                    });
                return loaded;
            },

        })

    }

.. note::
    Se debe tener en la carpeta js la librería backbone-super-min.js

#) 

01 de Octubre del 2013 - 5:00 p.m
---------------------------------
~~~~~~~~~~~~~~~
Resumen del día
~~~~~~~~~~~~~~~
#)
Ver como funciona el pos para poder hacer el filtrado de los productos
10:00 
2 horas

#)

Hoy aprendí sobre la herencia delegada, como por ejemplo en el módulo de product/product.py líne
536, en donde podemos observar que el modelo de product tiene una herencia delegada:  _inherits =
{'product.template': 'product_tmpl_id'}, y tiene product_tmpl_id como campo many2one a la clase de
product.template. En la tabla de product.product se pueden crear distintas formas de empaquetar a
un producto como por ejemplo por paleta, caja, paquete, etc. Pero a pesar de que se empaquetan de
manera distinta, de que tienen ean  distinto, entre otras cosas, comparten una información en común
y esa la encontraremos en el modulo de produtc.template, y de esa manera de evita repetir tanta
información.

#)

De modo que se agrego información al modulo product.product con dos booleanos por medio del nuevo
module delivery_restaurant, para saber si el producto se mostrará en el restaurant y/o en el
delivery. Tuve que hacer una consulta sql para poder agregar valores aleatorios a los registro yas
existentes:

    - update product_product set restaurant=true where id in (select id from product_product order by
      random() limit 100);
    - update product_product set delivery=true where id in (select id from product_product order by
      random() limit 100);

Esto hace que en la tabla product_product se modifique el campo restaurant o delivery a verdadero
en donde el id sea igual a los registros seleccionados aleatoriamente en la consulta despues de la
clausula IN.

#)

En el punto de venta estuve viendo como funciona la parte de ajvascript, y en el archivo models.js
línea 174, agregue los campos nuevos delivery y restaurant, para poder consultarlos luego en el
archivo widgets.js línea 576 

.. code-block :: javascript

    _.each(products, function(prod){                                                                                                    
         console.log(prod.name + "@@" +prod.restaurant);                                     
        }                                                                                   
    ); 

esta _.each función de underscore.js hace que a cada elemento de products lo reciba la función e imprima
la info que se desee.

~~~~~~~~~~~~~~~~~~
Servers ejecutados
~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Problemas que se presentaron
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
